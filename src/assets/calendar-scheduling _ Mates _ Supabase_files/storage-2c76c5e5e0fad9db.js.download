!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a1106984-548d-4071-a684-b273a97b02d6",e._sentryDebugIdIdentifier="sentry-dbid-a1106984-548d-4071-a684-b273a97b02d6")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1783,8426],{1373:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var a=r(80263),s=r(53239),n=r(62761),l=r(14984),o=r(52185),i=r(30381),d=r(32199),c=r(49911),u=r(53434),m=r.n(u),x=r(37361),p=r.n(x),f=r(73896),g=r(54650),h=r(72883),y=r(3283);m().extend(p());let b=e=>{var t;let{size:r,data:u,xAxisKey:x,stackKey:p,yAxisKey:b,customDateFormat:v=g.C_.FULL,title:j,highlightedValue:N,highlightedLabel:k,format:w,minimalHeader:S=!1,valuePrecision:A,onBarClick:C,variant:R,xAxisFormatAsDate:H=!0,displayDateInUtc:D,hideLegend:E=!1,hideHeader:L=!1,stackColors:_=g.ql}=e,{Container:T}=(0,h.dQ)(r),{dataKeys:M,stackedData:I,percentagesStackedData:P}=(0,h.BY)({data:u,xAxisKey:x,stackKey:p,yAxisKey:b,variant:R}),[q,O]=(0,s.useState)(null),z=null!==q&&u&&void 0!==u[q]&&(e=>D?m()(e).utc():m()(e))(u[q][x]).format(v)||k,F=null!==q?null==(t=u[q])?void 0:t[b]:N;if(!u||0===u.length)return(0,a.jsx)(y.A,{size:r});let B=(0,g.HH)(_);return(0,a.jsxs)("div",{className:"w-full","data-sentry-component":"StackedBarChart","data-sentry-source-file":"StackedBarChart.tsx",children:[!L&&(0,a.jsx)(f.A,{title:j,format:w,customDateFormat:v,minimalHeader:S,highlightedValue:"number"==typeof F?(0,h.Eg)(F,A):F,highlightedLabel:z}),(0,a.jsx)(T,{"data-sentry-element":"Container","data-sentry-source-file":"StackedBarChart.tsx",children:(0,a.jsxs)(n.E,{data:"percentages"===R?P:I,margin:{top:20,right:20,left:20,bottom:5},className:"cursor-pointer overflow-visible",onMouseMove:e=>{e.activeTooltipIndex!==q&&O(e.activeTooltipIndex)},onMouseLeave:()=>O(null),"data-sentry-element":"BarChart","data-sentry-source-file":"StackedBarChart.tsx",children:[!E&&(0,a.jsx)(l.s,{wrapperStyle:{top:-6,fontSize:"0.8rem"},iconSize:8,iconType:"circle",verticalAlign:"top"}),(0,a.jsx)(o.W,{dataKey:x,interval:u.length-2,angle:0,tick:!1,axisLine:{stroke:g.OK.AXIS},tickLine:{stroke:g.OK.AXIS},"data-sentry-element":"XAxis","data-sentry-source-file":"StackedBarChart.tsx"}),M.map((e,t)=>(0,a.jsx)(i.y,{dataKey:e,type:"monotone",legendType:"circle",fill:B[t].base,stackId:1,animationDuration:300,maxBarSize:48,className:C?"cursor-pointer":"",children:null==I?void 0:I.map((e,t)=>(0,a.jsx)(d.f,{className:"transition-all duration-300",opacity:q===t?.85:1},"cell-".concat(t)))},t)),(0,a.jsx)(c.m,{labelFormatter:H?e=>(0,h.bk)(e,v,D):void 0,formatter:(e,t,r)=>{let a=w||"";if("percentages"===R&&P){let s=I[P.findIndex(e=>e===r.payload)][t],n=(0,h.XO)(100*Number(e),1)+"%";return"".concat(n," (").concat(s).concat(a,")")}return String(e)+a},cursor:!1,labelClassName:"text-white",contentStyle:{backgroundColor:"#444444",borderColor:"#444444",fontSize:"12px"},wrapperClassName:"bg-gray-600 rounded min-w-md","data-sentry-element":"Tooltip","data-sentry-source-file":"StackedBarChart.tsx"})]})}),I&&I[0]&&(0,a.jsxs)("div",{className:"text-foreground-lighter -mt-5 flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:(0,h.bk)(I[0][x],v,D)}),(0,a.jsx)("span",{children:(0,h.bk)(I[(null==I?void 0:I.length)-1][x],v,D)})]})]})}},6885:(e,t,r)=>{"use strict";r.d(t,{B:()=>l,p:()=>n});var a=r(66880),s=r(40281);let n=e=>Object.fromEntries(new URLSearchParams(e)),l=(e,t)=>Object.entries(e).reduce((e,r)=>{let[n,{sql:l,queryType:o}]=r;return"db"===o?{...e,[n]:()=>(0,a.A)({sql:l})}:{...e,[n]:()=>(0,s.A)(t)}},{})},27846:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(80263),s=r(47504),n=r(19898),l=r(80489);let o=e=>{let{title:t,showDatabaseSelector:r}=e,o=(0,s.useRouter)(),{ref:i}=(0,n.g)(),{db:d,chart:c,...u}=o.query;return(0,a.jsxs)("div",{className:"flex flex-row justify-between gap-4 items-center","data-sentry-component":"ReportHeader","data-sentry-source-file":"ReportHeader.tsx",children:[(0,a.jsx)("h1",{className:"text-2xl text-foreground",children:t}),r&&(0,a.jsx)(l.A,{onSelectId:e=>{o.push({pathname:o.pathname,query:e!==i?{...u,db:e}:u})}})]})}},29297:(e,t,r)=>{"use strict";r.d(t,{CU:()=>d,Dv:()=>c,z6:()=>i});var a=r(80263),s=r(72342),n=r(3677),l=r(53239),o=r(51859);let i=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.bL,{className:(0,o.cn)("grid gap-2",r),...n,ref:t})});i.displayName=s.bL.displayName;let d=l.forwardRef((e,t)=>{let{className:r,children:l,...i}=e;return(0,a.jsx)(s.q7,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...i,children:(0,a.jsx)(s.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=s.q7.displayName;let c=l.forwardRef((e,t)=>{let{image:r,label:n,showIndicator:l=!0,...i}=e;return(0,a.jsxs)(s.q7,{ref:t,...i,className:(0,o.cn)("flex flex-col gap-2","w-48","bg-surface-200","rounded-md border border-strong","p-2","shadow-sm","hover:border-stronger hover:bg-surface-300","data-[state=checked]:border-primary","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-selection data-[state=checked]:border-foreground","transition-colors","group",i.className),children:[i.children,(0,a.jsxs)("div",{className:"flex gap-2 w-full",children:[l&&(0,a.jsxs)("div",{className:"relative w-3 h-3 min-w-3 mt-0.5",children:[(0,a.jsx)(s.C1,{className:(0,o.cn)("absolute","w-[10px] h-[10px]","left-[1px] top-[1px]","border border-background-surface-300","rounded-full","data-[state=checked]:border-background-surface-300","data-[state=checked]:ring-foreground","data-[state=checked]:bg-foreground")}),(0,a.jsx)("div",{className:(0,o.cn)("absolute","w-3 h-3","border border-stronger","rounded-full","group-hover:border-foreground-light","group-data-[state=checked]:border-foreground","transition-colors")})]}),(0,a.jsx)("label",{htmlFor:i.value,className:(0,o.cn)("text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",i.disabled?"cursor-not-allowed":"cursor-pointer"),children:n})]})]})});c.displayName=s.q7.displayName},33446:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(23983).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},39049:(e,t,r)=>{"use strict";r.d(t,{T5:()=>o,YN:()=>c,_2:()=>u,gl:()=>i,vm:()=>d});var a=r(80263);r(14430),r(53239),r(59686);var s=r(55866),n=r(3073);r(53434);var l=r(51859);let o=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:"flex h-full w-full items-center gap-4","data-sentry-component":"RowLayout","data-sentry-source-file":"LogsFormatters.tsx",children:t})},i=e=>{let{value:t,className:r}=e;return(0,a.jsx)("span",{className:(0,l.cn)("font-mono text-xs truncate select-text cursor-text",r),"data-sentry-component":"TextFormatter","data-sentry-source-file":"LogsFormatters.tsx",children:t})},d=e=>{let{value:t}=e;if(!t)return(0,a.jsx)("div",{children:(0,a.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let r=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:"flex h-full items-center","data-sentry-component":"ResponseCodeItem","data-sentry-source-file":"LogsFormatters.tsx",children:(0,a.jsx)("div",{className:(0,l.cn)("relative flex h-6 items-center rounded-md justify-center px-2 py-1 text-center",r),children:(0,a.jsx)("label",{className:"block font-mono text-sm",children:t})})})};switch(t.toString().split("")[0]){case"1":return(0,a.jsx)(r,{children:t});case"2":return(0,a.jsx)(r,{className:"bg-surface-100 text-brand",children:t});case"5":return(0,a.jsx)(r,{className:"bg-red-300 text-red-1100",children:t});case"4":case"3":return(0,a.jsx)(r,{className:"bg-amber-300 text-amber-1100",children:t});default:return(0,a.jsx)(r,{className:"bg-surface-100 text-foreground-lighter",children:t})}},c=e=>{let{value:t,uppercase:r=!0}=e;if(!t)return(0,a.jsx)("div",{children:(0,a.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let l=t.toUpperCase(),o=r?l:t,i=e=>{let{className:t,children:r}=e;return(0,a.jsx)("div",{className:"w-24 flex items-center h-full ".concat(t),"data-sentry-component":"Layout","data-sentry-source-file":"LogsFormatters.tsx",children:r})};switch(l){case"UNCAUGHTEXCEPTION":case"PANIC":case"FATAL":case"ERROR":return(0,a.jsxs)(i,{className:"gap-1",children:[(0,a.jsx)("div",{className:" p-0.5 rounded !text-red-900",children:(0,a.jsx)(s.A,{size:14,strokeWidth:2})}),(0,a.jsx)("span",{className:"!text-red-900 !block titlecase",children:o})]});case"INFO":case"DEBUG":return(0,a.jsxs)(i,{className:"gap-1",children:[(0,a.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,a.jsx)(s.A,{size:14,strokeWidth:2})}),(0,a.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"LOG":return(0,a.jsxs)(i,{className:"gap-1",children:[(0,a.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,a.jsx)(n.A,{size:14,strokeWidth:2})}),(0,a.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"WARNING":return(0,a.jsxs)(i,{className:"gap-1",children:[(0,a.jsx)("div",{className:" p-0.5 rounded !text-amber-900",children:(0,a.jsx)(s.A,{size:14,strokeWidth:2})}),(0,a.jsx)("span",{className:"!text-amber-900 !block titlecase",children:o})]});default:return(0,a.jsx)(i,{children:(0,a.jsx)("div",{className:"relative rounded px-2 py-1 text-center h-6 flex justify-center items-center bg-surface-100",children:(0,a.jsx)("label",{className:"block font-mono text-sm text-foreground-lighter",children:o})})})}};function u(e){let t=JSON.stringify(e,null,2);return(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number text-tomato-900";return/^"/.test(e)?t=/:$/.test(e)?"key text-foreground":"string text-brand-600":/true|false/.test(e)?t="boolean text-blue-900":/null/.test(e)&&(t="null text-amber-1100"),'<span class="'+t+'">'+e+"</span>"}).split("\n").map(e=>'<span class="line text-xs">'.concat(e,"</span>")).join("\n")}},48806:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(23983).A)("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]])},65961:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var a=r(80263),s=r(87959),n=r(77877),l=r(47504),o=r(19898),i=r(21889),d=r(51859),c=r(16632),u=r(71126),m=r(25424);let x=e=>{let t=(0,l.useRouter)(),{ref:r}=(0,o.g)();return(0,a.jsxs)(i.A,{noMargin:!0,noHideOverflow:!0,className:(0,d.cn)("pb-0",e.className),wrapWithLoading:!1,"data-sentry-element":"Panel","data-sentry-component":"ReportWidget","data-sentry-source-file":"ReportWidget.tsx",children:[(0,a.jsxs)(i.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"ReportWidget.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,a.jsxs)("div",{className:"gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)("h3",{className:"w-full h-6",children:e.title})," ",(null==e?void 0:e.tooltip)&&(0,a.jsxs)(c.m_,{children:[(0,a.jsx)(c.k$,{children:(0,a.jsx)(s.A,{className:"text-foreground-light",size:14,strokeWidth:1.5})}),(0,a.jsx)(c.ZI,{side:"bottom",children:e.tooltip})]})]}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:e.description})]}),e.params&&(0,a.jsxs)(c.m_,{children:[(0,a.jsx)(c.k$,{asChild:!0,children:(0,a.jsx)(u.$,{type:"default",icon:(0,a.jsx)(n.A,{}),className:"px-1",onClick:()=>{let a="db"===e.queryType,s=a?"/project/".concat(r,"/sql/new"):"/project/".concat(r,"/logs/explorer"),n={};if(a)n.content=e.resolvedSql;else{var l;n.q=null==(l=e.params)?void 0:l.sql,n.its=e.params.iso_timestamp_start,n.ite=e.params.iso_timestamp_end}t.push({pathname:s,query:n})}})}),(0,a.jsx)(c.ZI,{side:"left",children:"db"===e.queryType?"Open in SQL Editor":"Open in Logs Explorer"})]})]}),(0,a.jsx)(m.A,{active:e.isLoading,"data-sentry-element":"Loading","data-sentry-source-file":"ReportWidget.tsx",children:void 0===e.data?null:e.renderer({...e,router:t,projectRef:r})})]}),e.append&&(0,a.jsx)(a.Fragment,{children:e.append({...e,...e.appendProps||{},router:t,projectRef:r})})]})}},66880:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(56947),s=r(11164),n=r(97872),l=r(61428),o=r(96557),i=r(51626);let d=e=>{var t;let{sql:r,params:d=s.EV,where:c,orderBy:u}=e,{project:m}=(0,n.Om)(),x=(0,i.RE)(),{data:p}=(0,l.Vh)({projectRef:null==m?void 0:m.ref}),f=null==(t=(p||[]).find(e=>e.identifier===x.selectedDatabaseId))?void 0:t.connectionString,g=x.selectedDatabaseId,h="function"==typeof r?r([]):r,{data:y,error:b,isLoading:v,isRefetching:j,refetch:N}=(0,a.I)(["projects",null==m?void 0:m.ref,"db",{...d,sql:h,identifier:g},c,u],e=>{let{signal:t}=e;return(0,o.E)({projectRef:null==m?void 0:m.ref,connectionString:f||(null==m?void 0:m.connectionString),sql:h},t).then(e=>e.result)},{enabled:!!h,refetchOnWindowFocus:!1,refetchOnReconnect:!1});return{error:b||("object"==typeof y?null==y?void 0:y.error:""),data:y,isLoading:v,isRefetching:j,params:d,runQuery:N,resolvedSql:h}}},69368:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(23983).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},70639:(e,t,r)=>{"use strict";r.d(t,{O:()=>j});var a=r(80263),s=r(53434),n=r.n(s),l=r(49009),o=r(62763),i=r(61062),d=r(66915),c=r(53239),u=r(38887),m=r.n(u),x=r(97380),p=r(29297),f=r(95125),g=r(51527),h=r(95793),y=r(71126),b=r(51859),v=r(54402);let j=e=>{let{onSubmit:t,helpers:r,value:s}=e,[u,j]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!u){k(s.from?new Date(s.from):null),S(s.to?new Date(s.to):new Date);let e=s.from?new Date(s.from):null,t=s.to?new Date(s.to):null;C({HH:(null==e?void 0:e.getHours().toString().padStart(2,"0"))||"00",mm:(null==e?void 0:e.getMinutes().toString().padStart(2,"0"))||"00",ss:(null==e?void 0:e.getSeconds().toString().padStart(2,"0"))||"00"});let r=new Date,a=r.getHours().toString().padStart(2,"0"),n=r.getMinutes().toString().padStart(2,"0"),l=r.getSeconds().toString().padStart(2,"0");H({HH:(null==t?void 0:t.getHours().toString().padStart(2,"0"))||a,mm:(null==t?void 0:t.getMinutes().toString().padStart(2,"0"))||n,ss:(null==t?void 0:t.getSeconds().toString().padStart(2,"0"))||l})}},[u,s]);let[N,k]=(0,c.useState)(s.from?new Date(s.from):null),[w,S]=(0,c.useState)(s.to?new Date(s.to):new Date),[A,C]=(0,c.useState)({HH:(null==N?void 0:N.getHours().toString())||"00",mm:(null==N?void 0:N.getMinutes().toString())||"00",ss:(null==N?void 0:N.getSeconds().toString())||"00"}),[R,H]=(0,c.useState)({HH:(null==w?void 0:w.getHours().toString())||"23",mm:(null==w?void 0:w.getMinutes().toString())||"59",ss:(null==w?void 0:w.getSeconds().toString())||"59"}),[D,E]=(0,c.useState)(!1),[L,_]=(0,c.useState)(!1);function T(){navigator.clipboard.readText().then(e=>{try{let t=JSON.parse(e);if(!t.from||!t.to)return void console.warn("Invalid date range format in clipboard");let r=new Date(t.from),a=new Date(t.to);if(isNaN(r.getTime())||isNaN(a.getTime()))return void console.warn("Invalid date values in clipboard");k(r),S(a),C({HH:r.getHours().toString(),mm:r.getMinutes().toString(),ss:r.getSeconds().toString()}),H({HH:a.getHours().toString(),mm:a.getMinutes().toString(),ss:a.getSeconds().toString()}),_(!0)}catch(e){console.warn("Failed to parse clipboard content as date range:",e)}}).catch(e=>{console.warn("Failed to read clipboard:",e)})}function M(){if(!N||!w)return;let e=new Date(N),t=new Date(w);e.setHours(+A.HH,+A.mm,+A.ss),t.setHours(+R.HH,+R.mm,+R.ss),(0,g.l)(JSON.stringify({from:e.toISOString(),to:t.toISOString()})),E(!0)}(0,c.useEffect)(()=>{D&&setTimeout(()=>{E(!1)},2e3)},[D]),(0,c.useEffect)(()=>{L&&setTimeout(()=>{_(!1)},2e3)},[L]),(0,c.useEffect)(()=>(u&&(document.addEventListener("paste",T),document.addEventListener("copy",M)),()=>{document.removeEventListener("paste",T),document.removeEventListener("copy",M)}),[u,N,w]);let I=Math.abs(n()(N).diff(n()(w),"days"))>v.VM-1;return(0,a.jsxs)(h.AM,{open:u,onOpenChange:j,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"LogsDatePicker","data-sentry-source-file":"Logs.DatePickers.tsx",children:[(0,a.jsx)(h.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"Logs.DatePickers.tsx",children:(0,a.jsx)(y.$,{type:"default",icon:(0,a.jsx)(l.A,{size:12}),"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:s.isHelper?s.text:"".concat(n()(s.from).format("DD MMM, HH:mm")," - ").concat(n()(s.to||new Date).format("DD MMM, HH:mm"))})}),(0,a.jsxs)(h.hl,{className:"flex w-full p-0",side:"bottom",align:"center",portal:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"Logs.DatePickers.tsx",children:[(0,a.jsx)(p.z6,{onValueChange:e=>{let a=r.find(t=>t.text===e);t&&a&&t({to:a.calcTo(),from:a.calcFrom(),isHelper:!0,text:a.text}),j(!1)},value:s.isHelper?s.text:"",className:"border-r p-2 flex flex-col gap-px","data-sentry-element":"RadioGroup","data-sentry-source-file":"Logs.DatePickers.tsx",children:r.map(e=>(0,a.jsxs)(x.J,{className:(0,b.cn)("[&:has([data-state=checked])]:bg-background-overlay-hover [&:has([data-state=checked])]:text-foreground px-4 py-1.5 text-foreground-light flex items-center gap-2 hover:bg-background-overlay-hover hover:text-foreground transition-all rounded-sm text-xs",{"cursor-not-allowed pointer-events-none opacity-50":e.disabled}),children:[(0,a.jsx)(p.CU,{hidden:!0,value:e.text,disabled:e.disabled,"aria-disabled":e.disabled},e.text),e.text]},e.text))}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex p-2 gap-2 items-center",children:[(0,a.jsxs)("div",{className:"flex flex-grow *:flex-grow gap-2 font-mono",children:[(0,a.jsx)(f.A,{type:"start",startTime:A,endTime:R,time:A,setTime:C,setStartTime:C,setEndTime:H,startDate:N,endDate:w,"data-sentry-element":"TimeSplitInput","data-sentry-source-file":"Logs.DatePickers.tsx"}),(0,a.jsx)(f.A,{type:"end",startTime:A,endTime:R,time:R,setTime:H,setStartTime:C,setEndTime:H,startDate:N,endDate:w,"data-sentry-element":"TimeSplitInput","data-sentry-source-file":"Logs.DatePickers.tsx"})]}),(0,a.jsx)("div",{className:"flex-shrink",children:(0,a.jsx)(y.$,{icon:(0,a.jsx)(o.A,{size:14}),type:"text",size:"tiny",className:"px-1.5",onClick:()=>{C({HH:"00",mm:"00",ss:"00"}),H({HH:"00",mm:"00",ss:"00"})},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx"})})]}),(0,a.jsx)("div",{className:"p-2 border-t",children:(0,a.jsx)(m(),{inline:!0,selectsRange:!0,onChange:e=>{!function(e){let[t,r]=e;k(t),S(r)}(e)},dateFormat:"MMMM d, yyyy h:mm aa",dayClassName:()=>"cursor-pointer",startDate:N,endDate:w,renderCustomHeader:e=>{let{date:t,decreaseMonth:r,increaseMonth:s,prevMonthButtonDisabled:l,nextMonthButtonDisabled:o}=e;return(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(y.$,{onClick:r,disabled:l,icon:(0,a.jsx)(i.A,{size:14,strokeWidth:2}),type:"text",size:"tiny",className:"px-1.5"}),(0,a.jsx)("span",{className:"text-sm text-foreground-light",children:n()(t).format("MMMM YYYY")}),(0,a.jsx)(y.$,{onClick:s,disabled:o,icon:(0,a.jsx)(d.A,{size:14,strokeWidth:2}),type:"text",size:"tiny",className:"px-1.5"})]})})},"data-sentry-element":"DatePicker","data-sentry-source-file":"Logs.DatePickers.tsx"})}),I&&(0,a.jsxs)("div",{className:"text-xs px-3 py-1.5 border-y bg-warning-300 text-warning-foreground border-warning-500 text-warning-600",children:["Large ranges may result in memory errors for ",(0,a.jsx)("br",{})," big projects."]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 p-2 border-t",children:[N&&w?(0,a.jsx)(y.$,{type:"text",size:"tiny",onClick:M,className:(0,b.cn)({"text-brand-600":D||L}),children:D?"Copied!":L?"Pasted!":"Copy range"}):null,(0,a.jsx)(y.$,{type:"default",onClick:()=>{k(new Date),S(new Date)},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:"Today"}),(0,a.jsx)(y.$,{onClick:function(){let e=N||new Date,r=w||new Date,a=new Date(e.setHours(+A.HH,+A.mm,+A.ss)),s=new Date(r.setHours(+R.HH,+R.mm,+R.ss));t({from:a.toISOString(),to:s.toISOString(),isHelper:!1}),j(!1)},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:"Apply"})]})]})]})]})}},72342:(e,t,r)=>{"use strict";r.d(t,{C1:()=>P,bL:()=>M,q7:()=>I});var a=r(54993),s=r(53239),n=r(91968),l=r(63774),o=r(68436),i=r(70297),d=r(23578),c=r(87990),u=r(37268),m=r(89422),x=r(15630),p=r(74519);let f="Radio",[g,h]=(0,o.A)(f),[y,b]=g(f),v=(0,s.forwardRef)((e,t)=>{let{__scopeRadio:r,name:o,checked:d=!1,required:c,disabled:u,value:m="on",onCheck:x,...p}=e,[f,g]=(0,s.useState)(null),h=(0,l.s)(t,e=>g(e)),b=(0,s.useRef)(!1),v=!f||!!f.closest("form");return(0,s.createElement)(y,{scope:r,checked:d,disabled:u},(0,s.createElement)(i.sG.button,(0,a.A)({type:"button",role:"radio","aria-checked":d,"data-state":k(d),"data-disabled":u?"":void 0,disabled:u,value:m},p,{ref:h,onClick:(0,n.m)(e.onClick,e=>{d||null==x||x(),v&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})),v&&(0,s.createElement)(N,{control:f,bubbles:!b.current,name:o,value:m,checked:d,required:c,disabled:u,style:{transform:"translateX(-100%)"}}))}),j=(0,s.forwardRef)((e,t)=>{let{__scopeRadio:r,forceMount:n,...l}=e,o=b("RadioIndicator",r);return(0,s.createElement)(p.C,{present:n||o.checked},(0,s.createElement)(i.sG.span,(0,a.A)({"data-state":k(o.checked),"data-disabled":o.disabled?"":void 0},l,{ref:t})))}),N=e=>{let{control:t,checked:r,bubbles:n=!0,...l}=e,o=(0,s.useRef)(null),i=(0,x.Z)(r),d=(0,m.X)(t);return(0,s.useEffect)(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==r&&t){let a=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(a)}},[i,r,n]),(0,s.createElement)("input",(0,a.A)({type:"radio","aria-hidden":!0,defaultChecked:r},l,{tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function k(e){return e?"checked":"unchecked"}let w=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S="RadioGroup",[A,C]=(0,o.A)(S,[d.RG,h]),R=(0,d.RG)(),H=h(),[D,E]=A(S),L=(0,s.forwardRef)((e,t)=>{let{__scopeRadioGroup:r,name:n,defaultValue:l,value:o,required:m=!1,disabled:x=!1,orientation:p,dir:f,loop:g=!0,onValueChange:h,...y}=e,b=R(r),v=(0,u.jH)(f),[j,N]=(0,c.i)({prop:o,defaultProp:l,onChange:h});return(0,s.createElement)(D,{scope:r,name:n,required:m,disabled:x,value:j,onValueChange:N},(0,s.createElement)(d.bL,(0,a.A)({asChild:!0},b,{orientation:p,dir:v,loop:g}),(0,s.createElement)(i.sG.div,(0,a.A)({role:"radiogroup","aria-required":m,"aria-orientation":p,"data-disabled":x?"":void 0,dir:v},y,{ref:t}))))}),_=(0,s.forwardRef)((e,t)=>{let{__scopeRadioGroup:r,disabled:o,...i}=e,c=E("RadioGroupItem",r),u=c.disabled||o,m=R(r),x=H(r),p=(0,s.useRef)(null),f=(0,l.s)(t,p),g=c.value===i.value,h=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=e=>{w.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,s.createElement)(d.q7,(0,a.A)({asChild:!0},m,{focusable:!u,active:g}),(0,s.createElement)(v,(0,a.A)({disabled:u,required:c.required,checked:g},x,i,{name:c.name,ref:f,onCheck:()=>c.onValueChange(i.value),onKeyDown:(0,n.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,n.m)(i.onFocus,()=>{var e;h.current&&(null==(e=p.current)||e.click())})})))}),T=(0,s.forwardRef)((e,t)=>{let{__scopeRadioGroup:r,...n}=e,l=H(r);return(0,s.createElement)(j,(0,a.A)({},l,n,{ref:t}))}),M=L,I=_,P=T},88183:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/reports/storage",function(){return r(90467)}])},90467:(e,t,r)=>{"use strict";r.r(t),r.d(t,{StorageReport:()=>w,default:()=>S});var a=r(80263),s=r(53239),n=r(27846),l=r(39532),o=r(65961),i=r(11164),d=r(39049),c=r(80125),u=r(1373);let m=e=>{let t=e.data.flatMap(e=>[{timestamp:e.timestamp/1e3,count:e.hit_count,type:"hit"},{timestamp:e.timestamp/1e3,count:e.miss_count,type:"miss"}]);return(0,a.jsx)(u.A,{hideHeader:!0,variant:"percentages",data:t,xAxisKey:"timestamp",yAxisKey:"count",stackKey:"type",stackColors:["brand","amber"],"data-sentry-element":"StackedBarChart","data-sentry-component":"CacheHitRateChartRenderer","data-sentry-source-file":"StorageRenderers.tsx"})},x=e=>{if(0===e.data.length)return null;let t="!text-xs !py-2 p-0 font-bold !bg-surface-200",r="!text-xs !py-2";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"py-4 px-6",children:"Top Cache Misses"}),(0,a.jsx)(c.A,{head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A.th,{className:t,children:"Request"}),(0,a.jsx)(c.A.th,{className:t+" text-right",children:"Count"})]}),body:(0,a.jsx)(a.Fragment,{children:e.data.map(e=>(0,a.jsx)(s.Fragment,{children:(0,a.jsxs)(c.A.tr,{className:"p-0",children:[(0,a.jsx)(c.A.td,{className:[r].join(" "),children:(0,a.jsxs)("div",{className:" truncate max-w-sm lg:max-w-lg",children:[(0,a.jsx)(d.gl,{className:"text-foreground-light",value:e.path}),(0,a.jsx)(d.gl,{className:"max-w-sm text-foreground-lighter truncate ",value:decodeURIComponent(e.search||"")})]})}),(0,a.jsx)(c.A.td,{className:[r,"text-right align-top"].join(" "),children:e.count})]})},e.path+(e.search||"")))}),"data-sentry-element":"Table","data-sentry-source-file":"StorageRenderers.tsx"})]})};var p=r(70639),f=r(45926),g=r(41370),h=r(46036),y=r(19898),b=r(6885);let v=()=>{let{ref:e}=(0,y.g)(),t=(0,b.B)(i.NY.storage.queries,null!=e?e:"default"),r=t.cacheHitRate(),a=t.topCacheMisses(),n=[r,a],l=async()=>{n.forEach(e=>e.runQuery())};(0,s.useEffect)(()=>{r.changeQuery&&r.changeQuery(i.NY.storage.queries.cacheHitRate.sql([])),a.changeQuery&&a.changeQuery(i.NY.storage.queries.topCacheMisses.sql([]))},[]);let o=n.some(e=>e.isLoading);return{data:{cacheHitRate:r.logData,topCacheMisses:a.logData},params:{cacheHitRate:r.params,topCacheMisses:a.params},mergeParams:e=>{n.forEach(t=>{var r;null==(r=t.setParams)||r.call(t,t=>({...t,...e}))})},isLoading:o,refresh:l}};var j=r(34969),N=r(653),k=r(1053);let w=()=>{let e=v(),t=(0,j.a)(),{isLoading:r,refresh:d}=e,c=null==t?void 0:t.plan,u=i.xm.find(e=>e.default)||i.xm[0],[f,y]=(0,s.useState)({to:u.calcTo(),from:u.calcFrom(),isHelper:!0,text:u.text}),b=(0,i.bR)((null==c?void 0:c.id)||"free");return(0,a.jsxs)(l.A,{"data-sentry-element":"ReportPadding","data-sentry-component":"StorageReport","data-sentry-source-file":"storage.tsx",children:[(0,a.jsx)(n.A,{title:"Storage","data-sentry-element":"ReportHeader","data-sentry-source-file":"storage.tsx"}),(0,a.jsxs)("div",{className:"w-full flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(g.G,{type:"default",disabled:r,icon:(0,a.jsx)(N.A,{className:r?"animate-spin":""}),className:"w-7",tooltip:{content:{side:"bottom",text:"Refresh report"}},onClick:()=>d(),"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"storage.tsx"}),(0,a.jsx)(p.O,{onSubmit:t=>{e.mergeParams({iso_timestamp_start:t.from||"",iso_timestamp_end:t.to||""}),y(t)},value:f,helpers:b,"data-sentry-element":"LogsDatePicker","data-sentry-source-file":"storage.tsx"})]}),(0,a.jsx)("div",{className:"h-2 w-full",children:(0,a.jsx)(h.A,{active:e.isLoading,"data-sentry-element":"ShimmerLine","data-sentry-source-file":"storage.tsx"})})]}),(0,a.jsx)(o.A,{isLoading:e.isLoading,params:e.params.cacheHitRate,title:"Request Caching",tooltip:"The number of storage requests that are cached at the edge level. A higher number of hits is better.",data:e.data.cacheHitRate||[],renderer:m,append:x,appendProps:{data:e.data.topCacheMisses||[]},"data-sentry-element":"ReportWidget","data-sentry-source-file":"storage.tsx"})]})};w.getLayout=e=>(0,a.jsx)(k.A,{children:(0,a.jsx)(f.A,{children:e})});let S=w}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2147,726,4669,9353,7176,3730,9844,6110,9955,6871,8153,5297,5661,4100,8870,2981,4181,2187,4560,7344,3895,1959,9116,9869,4938,7872,5874,49,2174,971,6642,8434,2602,227,6593,636,8792],()=>t(88183)),_N_E=e.O()}]);