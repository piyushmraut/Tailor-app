!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3bce7476-7b97-4b31-bbbb-3bf79ac5c460",e._sentryDebugIdIdentifier="sentry-dbid-3bce7476-7b97-4b31-bbbb-3bf79ac5c460")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6851,8426],{13495:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var s=a(80263),r=a(60045),l=a(97872),n=a(46610),i=a(69636),c=a(77227),o=a(95319),d=a(25321),u=a(82008),x=a(39321);let m=e=>{var t,a;let{}=e,m=(0,x.ap)(),{selectedSchema:p}=(0,d.k)(),f=u.i.includes(p),h=(0,c.SE)(r.aG.TENANT_SQL_ADMIN_WRITE,"tables")&&!f,[j]=(0,o.M)("table-editor-sort","alphabetical"),{project:g}=(0,l.Om)(),{data:b}=(0,i.kD)({projectRef:null==g?void 0:g.ref,connectionString:null==g?void 0:g.connectionString,schemas:[p],sort:j}),y=null!=(a=null==b||null==(t=b.pages)?void 0:t[0].data.count)?a:0;return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center","data-sentry-component":"EmptyState","data-sentry-source-file":"EmptyState.tsx",children:0===y?(0,s.jsx)(n.A,{title:"Table Editor",ctaButtonLabel:h?"Create a new table":void 0,onClickCta:h?m.onAddTable:void 0,children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no tables available in this schema."})}):(0,s.jsx)("div",{className:"flex flex-col items-center space-y-4",children:(0,s.jsx)(n.A,{title:"Table Editor",ctaButtonLabel:h?"Create a new table":void 0,onClickCta:h?m.onAddTable:void 0,children:(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Select a table from the navigation panel on the left to view its data",h&&", or create a new one."]})})})})}},33532:(e,t,a)=>{"use strict";a.d(t,{A:()=>B});var s=a(80263),r=a(60045),l=a(53667),n=a.n(l),i=a(65880),c=a(59153),o=a.n(c),d=a(47504),u=a(73969),x=a(19898),m=a(79255),p=a(93269),f=a(57304),h=a(64652),j=a(77227),g=a(34969),b=a(49443),y=a(2057),v=a(62420),N=a(39321),w=a(56163),C=a(81924),k=a(51859),q=a(84746),_=a(71126),E=a(13114),T=a(97872),A=a(78823),R=a(53434),I=a.n(R),S=a(27344),L=a.n(S),P=a(37055),W=a(88712),D=a(31883);function U(){let{ref:e}=(0,x.g)(),t=(0,w.zv)(),a=(0,E.l)();if(!(null==t?void 0:t.recentItems)||!e)return null;let r=(a?t.recentItems.filter(e=>w.qm[a].includes(e.type)):[...t.recentItems]).sort((e,t)=>t.timestamp-e.timestamp);return(0,s.jsxs)("div",{className:"space-y-4","data-sentry-component":"RecentItems","data-sentry-source-file":"RecentItems.tsx",children:[(0,s.jsx)("h2",{className:"text-sm text-foreground",children:"Recent items"}),(0,s.jsx)("div",{className:"flex flex-col gap-0",children:0===r.length?(0,s.jsxs)(P.P.div,{layout:!0,initial:!1,className:"flex flex-col items-center justify-center p-8 text-center border rounded-md border-muted gap-3",children:[(0,s.jsx)(D.L,{type:"r"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"No recent items yet"}),(0,s.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Items will appear here as you browse through your project"})]})]}):(0,s.jsx)(W.N,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-12 gap-y-0",children:r.map((t,a)=>{var r,l,n,i,c,d,u;return(0,s.jsx)(P.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.012*a,duration:.15},children:(0,s.jsxs)(o(),{href:"/project/".concat(e,"/").concat("sql"===t.type?"sql/".concat(null==(r=t.metadata)?void 0:r.sqlId):"r"===t.type||"v"===t.type||"m"===t.type||"f"===t.type||"p"===t.type?"editor/".concat(null==(l=t.metadata)?void 0:l.tableId,"?schema=").concat(null==(n=t.metadata)?void 0:n.schema):"explorer/".concat(t.type,"/").concat(null==(i=t.metadata)?void 0:i.schema,"/").concat(null==(c=t.metadata)?void 0:c.name)),className:"flex items-center gap-4 rounded-lg bg-surface-100 py-2 transition-colors hover:bg-surface-200",children:[(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-surface-100 border",children:(0,s.jsx)(D.L,{type:t.type})}),(0,s.jsxs)("div",{className:"flex flex-1 gap-5 items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-foreground",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:null==(d=t.metadata)?void 0:d.schema}),(null==(u=t.metadata)?void 0:u.schema)&&(0,s.jsx)("span",{className:"text-foreground-light",children:"."}),(0,s.jsx)("span",{className:"text-foreground",children:t.label||"Untitled"})]}),(0,s.jsx)("div",{className:"bg-border-muted flex grow h-px"}),(0,s.jsx)("span",{className:"text-xs text-foreground-lighter",children:I()(t.timestamp).fromNow()})]})]})},t.id)})})})})]})}function B(){let e=(0,d.useRouter)(),{ref:t}=(0,x.g)(),a=(0,E.l)(),{profile:l}=(0,y.xc)(),c=(0,g.a)(),{project:R}=(0,T.Om)(),I=(0,N.ap)(),S=(0,v.aP)(),L=(0,w.zv)(),[P]=n()(p.R,{type:"template"}),[W]=n()(p.R,{type:"quickstart"}),{mutate:D}=(0,h.h)(),B=(0,j.SE)(r.aG.CREATE,"user_content",{resource:{type:"sql",owner_id:null==l?void 0:l.id},subject:{id:null==l?void 0:l.id}}),M=[{icon:(0,s.jsx)(i.A,{className:"h-4 w-4 text-foreground",strokeWidth:1.5}),title:"Create a table",description:"Design and create a new database table",bgColor:"bg-blue-500",isBeta:!1,onClick:I.onAddTable}],z=[{icon:(0,s.jsx)(C.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),title:"New SQL Snippet",description:"Execute SQL queries",bgColor:"bg-green-500",isBeta:!1,onClick:()=>e.push("/project/".concat(t,"/sql/new"))}],$=async(a,s)=>{if(!t)return console.error("Project ref is required");if(!R)return console.error("Project is required");if(!l)return console.error("Profile is required");if(!B)return(0,u.oR)("Your queries will not be saved as you do not have sufficient permissions");try{let r=(0,f.fW)({id:(0,b.gZ)(),name:s,sql:a,owner_id:null==l?void 0:l.id,project_id:null==R?void 0:R.id});S.addSnippet({projectRef:t,snippet:r}),S.addNeedsSaving(r.id);let n=(0,w.lW)("sql",{id:r.id});L.addTab({id:n,type:"sql",label:s,metadata:{sqlId:r.id}}),e.push("/project/".concat(t,"/sql/").concat(r.id))}catch(e){u.oR.error("Failed to create new query: ".concat(e.message))}};return(0,s.jsxs)("div",{className:"bg-surface-100 h-full overflow-y-auto py-12","data-sentry-component":"NewTab","data-sentry-source-file":"NewTab.tsx",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col gap-10 px-10",children:[(0,s.jsx)(m.k5,{"data-sentry-element":"TabsUpdateCallout","data-sentry-source-file":"NewTab.tsx"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:("sql"===a?z:M).map((e,t)=>(0,s.jsx)(A.L,{...e},"action-card-".concat(t)))}),(0,s.jsx)(U,{"data-sentry-element":"RecentItems","data-sentry-source-file":"NewTab.tsx"})]}),"sql"===a&&(0,s.jsx)("div",{className:"flex flex-col gap-4 mx-auto py-10",children:(0,s.jsxs)(q.tU,{defaultValue:"templates",children:[(0,s.jsxs)(q.j7,{className:"mx-auto justify-center gap-5",children:[(0,s.jsx)(q.Xi,{value:"templates",children:"Templates"}),(0,s.jsx)(q.Xi,{value:"quickstarts",children:"Quickstarts"})]}),(0,s.jsxs)(q.av,{value:"templates",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:P.slice(0,9).map((e,a)=>(0,s.jsx)(A.L,{onClick:()=>{var a;$(e.sql,e.title),D({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(a=null==c?void 0:c.slug)?a:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(C.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(a)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(_.$,{asChild:!0,type:"default",children:(0,s.jsx)(o(),{href:"/project/".concat(t,"/sql/templates"),children:"View more templates"})})})]}),(0,s.jsxs)(q.av,{value:"quickstarts",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:W.map((e,a)=>(0,s.jsx)(A.L,{onClick:()=>{var a;$(e.sql,e.title),D({action:"sql_editor_quickstart_clicked",properties:{quickstartName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(a=null==c?void 0:c.slug)?a:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(C.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(a)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(_.$,{asChild:!0,type:"default",children:(0,s.jsx)(o(),{href:"/project/".concat(t,"/sql/quickstarts"),children:"View more templates"})})})]})]})})]})}I().extend(L())},46610:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(80263),r=a(77877),l=a(41370),n=a(59153),i=a.n(n),c=a(71126);let o=e=>{let{title:t="",size:a="medium",children:n,ctaButtonLabel:o="",infoButtonLabel:d="",infoButtonUrl:u="",onClickCta:x=()=>{},loading:m=!1,disabled:p=!1,disabledMessage:f="",ctaUrl:h}=e,j=o&&x||u&&d;return(0,s.jsx)("div",{className:"flex h-full w-full items-center justify-center","data-sentry-component":"ProductEmptyState","data-sentry-source-file":"ProductEmptyState.tsx",children:(0,s.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsxs)("div",{className:"".concat("medium"===a?"w-80":"w-[400px]"," space-y-4"),children:[(0,s.jsx)("h5",{className:"text-foreground",children:t}),(0,s.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:n}),j&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&h?(0,s.jsx)(c.$,{asChild:!0,type:"primary",children:(0,s.jsx)(i(),{href:h,children:o})}):o&&x?(0,s.jsx)(l.G,{type:"primary",onClick:x,loading:m,disabled:m||p,tooltip:{content:{side:"bottom",text:p&&f.length>0?f:void 0}},children:o}):null,u&&d?(0,s.jsx)(c.$,{type:"default",icon:(0,s.jsx)(r.A,{strokeWidth:1.5}),children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",href:u,children:d})}):null]})]})})})})}},47510:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/editor",function(){return a(74504)}])},74504:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(80263),r=a(19898),l=a(90915),n=a(13495),i=a(99599),c=a(1053),o=a(97878),d=a(34037),u=a(57052),x=a(33532),m=a(47504),p=a(53239),f=a(22787),h=a(56163);let j=()=>{let e=(0,m.useRouter)(),{ref:t}=(0,r.g)(),a=(0,h.zv)(),c=(0,f.qM)(),o=(0,l.mh)();return(0,p.useEffect)(()=>{let s=c.dashboardHistory.editor;if(o){let l=a.openTabs.find(e=>{var t;return h.qm.table.includes(null==(t=a.tabsMap[e])?void 0:t.type)});if(void 0!==s)e.push("/project/".concat(t,"/editor/").concat(c.dashboardHistory.editor));else if(l){var r;let s=a.tabsMap[l];s&&e.push("/project/".concat(t,"/editor/").concat(null==(r=s.metadata)?void 0:r.tableId))}}else s&&e.push("/project/".concat(t,"/editor/").concat(c.dashboardHistory.editor))},[o]),(0,s.jsxs)(s.Fragment,{children:[o?(0,s.jsx)(x.A,{}):(0,s.jsx)(n.A,{}),(0,s.jsx)(i.A,{onTableCreated:a=>{e.push("/project/".concat(t,"/editor/").concat(a.id))},"data-sentry-element":"SidePanelEditor","data-sentry-source-file":"index.tsx"})]})};j.getLayout=e=>(0,s.jsx)(c.A,{children:(0,s.jsx)(o.$,{productMenu:(0,s.jsx)(u.A,{}),product:"Table Editor",children:(0,s.jsx)(d.A,{children:e})})});let g=j},76948:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>d});var s=a(80263),r=a(53239),l=a(51859);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",a),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-xs font-mono uppercase",a),...r})});c.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-foreground-muted",a),...r})}).displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("py-4 px-6 border-b last:border-none",a),...r})});o.displayName="CardContent";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)(" flex items-center py-4 px-6",a),...r})});d.displayName="CardFooter"},78823:(e,t,a)=>{"use strict";a.d(t,{L:()=>n});var s=a(80263),r=a(76948),l=a(65863);let n=e=>(0,s.jsx)(r.Zp,{className:"grow bg-surface-100 p-3 transition-colors hover:bg-surface-200 border border-light hover:border-default cursor-pointer",onClick:e.onClick,"data-sentry-element":"Card","data-sentry-component":"ActionCard","data-sentry-source-file":"ActionCard.tsx",children:(0,s.jsxs)("div",{className:"relative flex items-start gap-3",children:[e.isBeta&&(0,s.jsx)(l.E,{className:"absolute -right-5 -top-5 bg-surface-300 bg-opacity-100 text-xs text-foreground",children:"Coming soon"}),(0,s.jsx)("div",{className:"rounded-full ".concat(e.bgColor," w-8 h-8 flex items-center justify-center flex-shrink-0"),children:e.icon}),(0,s.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,s.jsx)("h3",{className:"text-sm text-foreground mb-0",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})}},e=>{var t=t=>e(e.s=t);e.O(0,[89,4335,2147,726,4669,9353,7176,3730,9844,6110,9955,6871,8153,5297,5661,4100,8870,2981,4181,2187,4560,7344,3895,1959,9116,9869,4938,6692,5758,8550,3902,7872,5874,49,2174,971,6642,8434,2602,4452,99,6389,6206,2138,6593,636,8792],()=>t(47510)),_N_E=e.O()}]);